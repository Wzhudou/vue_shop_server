"use strict";(self["webpackChunkvue_shop"]=self["webpackChunkvue_shop"]||[]).push([[241],{6008:function(e,t,a){a.r(t),a.d(t,{default:function(){return c}});var s=function(){var e=this,t=e._self._c;return t("div",[t("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[t("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[e._v("首页")]),t("el-breadcrumb-item",[e._v("商品管理")]),t("el-breadcrumb-item",[e._v("商品分类")])],1),t("el-card",[t("el-row",[t("el-col",[t("el-button",{attrs:{type:"primary"},on:{click:e.showAddCateDialog}},[e._v("添加分类")])],1)],1),t("tree-table",{staticClass:"treeTable",attrs:{data:e.cateList,columns:e.columns,"selection-type":!1,"expand-type":!1,"show-index":!0,"index-text":"#",border:"","show-row-hover":!1,"is-fold":!0},scopedSlots:e._u([{key:"isok",fn:function(e){return[e.row.cate_deleted?t("i",{staticClass:"el-icon-error",staticStyle:{color:"red"}}):t("i",{staticClass:"el-icon-success",staticStyle:{color:"lightgreen"}})]}},{key:"order",fn:function(a){return[0===a.row.cate_level?t("el-tag",{attrs:{size:"mini"}},[e._v("一级")]):1===a.row.cate_level?t("el-tag",{attrs:{type:"success"}},[e._v("二级")]):t("el-tag",{attrs:{type:"warning"}},[e._v("三级")])]}},{key:"opt",fn:function(a){return[t("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-edit"}},[e._v("编辑")]),t("el-button",{attrs:{type:"danger",size:"mini",icon:"el-icon-delete"}},[e._v("删除")])]}}])}),t("el-pagination",{attrs:{"current-page":e.queryInfo.pageum,"page-sizes":[3,5,10,15],"page-size":e.queryInfo.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),t("el-dialog",{attrs:{title:"添加分类",visible:e.addCateDialogVisible,width:"50%"},on:{"update:visible":function(t){e.addCateDialogVisible=t},close:e.addCateDialogClosed}},[t("el-form",{ref:"addCateRef",attrs:{model:e.addCateForm,rules:e.addCateFormRules,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"分类名称:",prop:"cate_name"}},[t("el-input",{model:{value:e.addCateForm.cate_name,callback:function(t){e.$set(e.addCateForm,"cate_name",t)},expression:"addCateForm.cate_name"}})],1),t("el-form-item",{attrs:{label:"父级分类:"}},[t("el-cascader",{attrs:{options:e.parentCateList,props:e.cascaderProps,clearable:""},on:{change:e.parentCateChange},model:{value:e.selectedKeys,callback:function(t){e.selectedKeys=t},expression:"selectedKeys"}})],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.addCateDialogVisible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.addCate}},[e._v("确 定")])],1)],1)],1)},l=[],i=a(555),r={name:"Cate",data(){return{cateList:[],queryInfo:{type:3,pageum:1,pagesize:5},total:0,columns:[{label:"分类名称",prop:"cate_name"},{label:"是否有效",type:"template",template:"isok"},{label:"排序",type:"template",template:"order"},{label:"操作",type:"template",template:"opt"}],addCateDialogVisible:!1,addCateForm:{cate_name:"",cate_pid:0,cate_level:0},addCateFormRules:{cate_name:[{required:!0,message:"请输入分类名称",trigger:"blur"}]},parentCateList:[],cascaderProps:{expandTrigger:"hover",checkStrictly:!0},selectedKeys:[]}},mounted(){this.getCateList()},methods:{getCateList(){this.cateList=i.Ng["data"],this.total=this.cateList.length},handleSizeChange(e){this.queryInfo.pagesize=e,this.getCateList()},handleCurrentChange(e){this.queryInfo.pageum=e},showAddCateDialog(){this.getParentCateList(),this.addCateDialogVisible=!0},getParentCateList(){this.parentCateList=i.jd["data"]},parentCateChange(){if(this.selectedKeys.length){const e=this.selectedKeys.length;return this.addCateForm.cate_pid=this.selectedKeys[e-1],void(this.addCateForm.cate_level=e)}this.addCateForm.cate_pid=0,this.addCateForm.cate_level=0},addCate(){this.$refs.addCateRef.validate((e=>{e&&(this.$message.success("添加商品分类成功"),this.getCateList(),this.addCateDialogVisible=!1)}))},addCateDialogClosed(){this.$refs.addCateRef.resetFields(),this.selectedKeys=[],this.addCateForm.cate_level=0,this.addCateForm.cate_pid=0}}},o=r,n=a(1001),d=(0,n.Z)(o,s,l,!1,null,"2b61a714",null),c=d.exports},8603:function(e,t,a){a.r(t),a.d(t,{default:function(){return c}});var s=function(){var e=this,t=e._self._c;return t("div",[t("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[t("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[e._v("首页")]),t("el-breadcrumb-item",[e._v("商品管理")]),t("el-breadcrumb-item",[e._v("分类参数")])],1),t("el-card",[t("el-alert",{attrs:{title:"注意：只允许为第三级分类设置相关参数!",type:"warning",closable:!1,"show-icon":""}}),t("el-row",{staticClass:"cat_opt"},[t("el-col",[t("span",[e._v("选择商品分类: ")]),t("el-cascader",{attrs:{options:e.cateList,props:e.cateProps,clearable:""},on:{change:e.goodsCateChange},model:{value:e.selectedCateKeys,callback:function(t){e.selectedCateKeys=t},expression:"selectedCateKeys"}})],1)],1),t("el-tabs",{on:{"tab-click":e.handleTabClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[t("el-tab-pane",{attrs:{label:"动态参数",name:"many"}},[t("el-button",{attrs:{type:"primary",size:"mini",disabled:e.isBtnDisabled}},[e._v("添加参数")]),t("el-table",{attrs:{data:e.manyTableData,border:"",stripe:""}},[t("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(a){return[e._l(a.row.attr_vals,(function(s,l){return t("el-tag",{key:l,attrs:{closable:""},on:{close:function(t){return e.handleClose(l,a.row)}}},[e._v(" "+e._s(s)+" ")])})),a.row.inputVisible?t("el-input",{ref:"saveTagInput",staticClass:"input-new-tag",attrs:{size:"small"},on:{blur:function(t){return e.handleInputConfirm(a.row)}},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleInputConfirm(a.row)}},model:{value:a.row.inputValue,callback:function(t){e.$set(a.row,"inputValue",t)},expression:"scope.row.inputValue"}}):t("el-button",{staticClass:"button-new-tag",attrs:{size:"small"},on:{click:function(t){return e.showInput(a.row)}}},[e._v("+ New Tag")])]}}])}),t("el-table-column",{attrs:{type:"index",label:"#"}}),t("el-table-column",{attrs:{label:"参数名称",prop:"attr_name"}}),t("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"}},[e._v("编辑")]),t("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"}},[e._v("删除")])]}}])})],1)],1),t("el-tab-pane",{attrs:{label:"静态属性",name:"only"}},[t("el-button",{attrs:{type:"primary",size:"mini",disabled:e.isBtnDisabled}},[e._v("添加属性")]),t("el-table",{attrs:{data:e.onlyTableData,border:"",stripe:""}},[t("el-table-column",{attrs:{type:"expand"}}),t("el-table-column",{attrs:{type:"index",label:"#"}}),t("el-table-column",{attrs:{label:"属性名称",prop:"attr_name"}}),t("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"}},[e._v("编辑")]),t("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"}},[e._v("删除")])]}}])})],1)],1)],1)],1)],1)},l=[],i=(a(7658),a(555)),r={name:"Params",data(){return{cateList:[],cateProps:{expandTrigger:"hover"},selectedCateKeys:[],activeName:"many",manyTableData:[],onlyTableData:[]}},mounted(){this.getCateList()},computed:{isBtnDisabled(){return 3!==this.selectedCateKeys.length},cateId(){return 3===this.selectedCateKeys.length?this.selectedCateKeys[2]:null}},methods:{getCateList(){this.cateList=i.jd["data"]},goodsCateChange(){if(3!==this.selectedCateKeys.length)return this.manyTableData=[],this.onlyTableData=[],void(this.selectedCateKeys=[]);this.getParamsData()},handleTabClick(){this.getParamsData()},getParamsData(){if(this.cateId)if("many"===this.activeName){const e=[{attr_id:1,attr_name:"版式",attr_sel:"many",attr_write:"manual",attr_vals:"49寸4k超薄曲面 人工智能,55寸4k观影曲面 30核HDR,55寸4k超薄曲面 人工智能,65寸4k超薄曲面 人工智能"},{attr_id:1,attr_name:"颜色",attr_sel:"many",attr_write:"manual",attr_vals:""}];e.forEach((e=>{e.attr_vals=e.attr_vals?e.attr_vals.split(" "):[],e.inputValue="",e.inputVisible=!1})),this.manyTableData=e}else{const e=[{attr_id:1,attr_name:"主体-商品名称",attr_sel:"only",attr_write:"manual",attr_vals:"fffff"},{attr_id:2,attr_name:"显示-曲面",attr_sel:"only",attr_write:"manual",attr_vals:"fffff"},{attr_id:3,attr_name:"系统-智能电视",attr_sel:"only",attr_write:"manual",attr_vals:"fffff"},{attr_id:4,attr_name:"外观挂壁显示",attr_sel:"only",attr_write:"manual",attr_vals:"fffff"},{attr_id:5,attr_name:"功能-整机功率",attr_sel:"only",attr_write:"manual",attr_vals:"fffff"}];e.forEach((e=>{e.attr_vals=e.attr_vals.split(" "),e.inputValue="",e.inputVisible=!1})),this.onlyTableData=e}},handleInputConfirm(e){if(!e.inputValue.trim().length)return e.inputValue="",void(e.inputVisible=!1);e.attr_vals.push(e.inputValue.trim()),e.inputValue="",e.inputVisible=!1,this.saveAttrVals(e)},showInput(e){e.inputVisible=!0,this.$nextTick((e=>{this.$refs.saveTagInput.$refs.input.focus()}))},handleClose(e,t){t.attr_vals.splice(e,1),this.saveAttrVals(t)},saveAttrVals(e){}}},o=r,n=a(1001),d=(0,n.Z)(o,s,l,!1,null,"917181b4",null),c=d.exports},4524:function(e,t,a){a.r(t),a.d(t,{default:function(){return c}});var s=function(){var e=this,t=e._self._c;return t("div",[t("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[t("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[e._v("首页")]),t("el-breadcrumb-item",[e._v("权限管理")]),t("el-breadcrumb-item",[e._v("权限列表")])],1),t("el-card",[t("el-table",{attrs:{data:e.rightsList,border:"",stripe:""}},[t("el-table-column",{attrs:{type:"index",label:"#"}}),t("el-table-column",{attrs:{label:"权限名称",prop:"authName"}}),t("el-table-column",{attrs:{label:"路径",prop:"path"}}),t("el-table-column",{attrs:{label:"权限等级",prop:"level"},scopedSlots:e._u([{key:"default",fn:function(a){return[0===a.row.level?t("el-tag",[e._v("一级")]):1===a.row.level?t("el-tag",{attrs:{type:"success"}},[e._v("二级")]):t("el-tag",{attrs:{type:"warning"}},[e._v("三级")])]}}])})],1)],1)],1)},l=[],i=a(555),r={name:"Rights",data(){return{rightsList:[]}},mounted(){},created(){this.getRightsList()},methods:{getRightsList(){this.rightsList=i._l["list"]}}},o=r,n=a(1001),d=(0,n.Z)(o,s,l,!1,null,"9a48ae7e",null),c=d.exports},9763:function(e,t,a){a.r(t),a.d(t,{default:function(){return c}});var s=function(){var e=this,t=e._self._c;return t("div",[t("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[t("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[e._v("首页")]),t("el-breadcrumb-item",[e._v("权限管理")]),t("el-breadcrumb-item",[e._v("角色列表")])],1),t("el-card",[t("el-row",[t("el-col",[t("el-button",{attrs:{type:"primary"}},[e._v("添加角色")])],1)],1),t("el-table",{attrs:{data:e.roleList,border:"",stripe:"","row-key":"id"}},[t("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(a){return e._l(a.row.children,(function(s,l){return t("el-row",{key:s.id,class:["bdbottom",0===l?"bdtop":"","vcenter"]},[t("el-col",{attrs:{span:5}},[t("el-tag",{attrs:{closable:""},on:{close:function(t){return e.removeRightById(a.row,s.id)}}},[e._v(" "+e._s(s.authName)+" ")]),t("i",{staticClass:"el-icon-caret-right"})],1),t("el-col",{attrs:{span:19}},e._l(s.children,(function(s,l){return t("el-row",{key:s.id,class:[0!==l?"bdtop":"","vcenter"]},[t("el-col",{attrs:{span:6}},[t("el-tag",{attrs:{type:"success",closable:""},on:{close:function(t){return e.removeRightById(a.row,s.id)}}},[e._v(e._s(s.authName))]),t("i",{staticClass:"el-icon-caret-right"})],1),t("el-col",{attrs:{span:18}},e._l(s.children,(function(s,l){return t("el-tag",{key:s.id,attrs:{type:"warning",closable:""},on:{close:function(t){return e.removeRightById(a.row,s.id)}}},[e._v(" "+e._s(s.authName)+" ")])})),1)],1)})),1)],1)}))}}])}),t("el-table-column",{attrs:{type:"index",label:"#"}}),t("el-table-column",{attrs:{label:"角色名称",prop:"roleName"}}),t("el-table-column",{attrs:{label:"角色描述",prop:"roleDesc"}}),t("el-table-column",{attrs:{label:"操作",width:"300px"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"}},[e._v("编辑")]),t("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"}},[e._v("删除")]),t("el-button",{attrs:{type:"warning",icon:"el-icon-setting",size:"mini"},on:{click:function(t){return e.showSetRightDialog(a.row)}}},[e._v("分配权限")])]}}])})],1)],1),t("el-dialog",{attrs:{title:"分配权限",visible:e.setRightDialogVisible,width:"50%"},on:{"update:visible":function(t){e.setRightDialogVisible=t},close:e.setRightDialogClosed}},[t("el-tree",{ref:"setRightsRef",attrs:{data:e.rightsList,props:e.treeProps,"show-checkbox":"","node-key":"id","default-expand-all":"","default-checked-keys":e.defKeys}}),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.setRightDialogVisible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.allotRights()}}},[e._v("确 定")])],1)],1)],1)},l=[],i=(a(7658),a(555)),r={name:"Roles",data(){return{roleList:[],setRightDialogVisible:!1,rightsList:[],treeProps:{children:"children",label:"authName"},defKeys:[],roleId:""}},created(){this.getRoleList()},mounted(){},methods:{getRoleList(){this.roleList=i.qJ["data"]},async removeRightById(e,t){const a=await this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch((e=>e));if("confirm"!==a)return this.$message.info("取消了删除");e.children=this.roleList.filter((t=>t.id=e.id))[0].children},showSetRightDialog(e){this.roleId=e.id,this.setRightDialogVisible=!0;const t=i._l["tree"];this.rightsList=t,this.getLeafKeys(e,this.defKeys),this.$refs.setRightsRef&&this.$refs.setRightsRef.setCheckedKeys(this.defKeys)},setRightDialogClosed(){this.defKeys=[],this.$refs.setRightsRef.setCheckedKeys([])},getLeafKeys(e,t){if(!e.children)return t.push(e.id);e.children.forEach((e=>{this.getLeafKeys(e,t)}))},allotRights(){const e=[...this.$refs.setRightsRef.getCheckedKeys(),...this.$refs.setRightsRef.getHalfCheckedKeys()];e.join(",");this.getRoleList(),this.setRightDialogVisible=!1}}},o=r,n=a(1001),d=(0,n.Z)(o,s,l,!1,null,"7b63fc22",null),c=d.exports},3768:function(e,t,a){a.r(t),a.d(t,{default:function(){return c}});var s=function(){var e=this,t=e._self._c;return t("div",[t("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[t("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[e._v("首页")]),t("el-breadcrumb-item",[e._v("用户管理")]),t("el-breadcrumb-item",[e._v("用户列表")])],1),t("el-card",{staticClass:"box-card"},[t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:9}},[t("el-input",{attrs:{placeholder:"请输入姓名",clearable:""},on:{clear:e.getUserList},model:{value:e.queryInfo.query,callback:function(t){e.$set(e.queryInfo,"query",t)},expression:"queryInfo.query"}},[t("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.getUserList},slot:"append"})],1)],1),t("el-col",{attrs:{span:4}},[t("el-button",{attrs:{type:"primary"},on:{click:function(t){e.addDialogVisible=!0}}},[e._v("添加用户")])],1)],1),t("el-table",{attrs:{data:e.userList,border:!0,stripe:""}},[t("el-table-column",{attrs:{label:"#",type:"index"}}),t("el-table-column",{attrs:{label:"姓名",prop:"username"}}),t("el-table-column",{attrs:{label:"邮箱",prop:"email"}}),t("el-table-column",{attrs:{label:"电话",prop:"mobile"}}),t("el-table-column",{attrs:{label:"角色",prop:"role_name"}}),t("el-table-column",{attrs:{label:"状态"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-switch",{attrs:{"active-color":"#409eff","inactive-color":"#DCDFE6"},on:{change:function(t){return e.userStateChanges(a.row)}},model:{value:a.row.mg_state,callback:function(t){e.$set(a.row,"mg_state",t)},expression:"scope.row.mg_state"}})]}}])}),t("el-table-column",{attrs:{label:"操作",width:"180px"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{staticClass:"el-icon-edit",attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.showEditDialog(a.row)}}}),t("el-button",{staticClass:"el-icon-delete",attrs:{type:"danger",size:"mini"},on:{click:function(t){return e.removeUserById(a.row.id)}}}),t("el-tooltip",{attrs:{effect:"dark",content:"分配角色",placement:"top",enterable:!1}},[t("el-button",{staticClass:"el-icon-setting",attrs:{type:"warning",size:"mini"},on:{click:function(t){return e.setRole(a.row)}}})],1)]}}])})],1),t("el-pagination",{attrs:{"current-page":e.queryInfo.pagenum,"page-sizes":[1,2,5,10],"page-size":e.queryInfo.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),t("el-dialog",{attrs:{title:"添加用户",visible:e.addDialogVisible,width:"50%"},on:{close:e.addDialogClosed,"update:visible":function(t){e.addDialogVisible=t}}},[t("el-form",{ref:"addFromRef",attrs:{model:e.addForm,rules:e.addFormRules,"label-width":"70px"}},[t("el-form-item",{attrs:{label:"用户名",prop:"username"}},[t("el-input",{model:{value:e.addForm.username,callback:function(t){e.$set(e.addForm,"username",t)},expression:"addForm.username"}})],1),t("el-form-item",{attrs:{label:"密码",prop:"password"}},[t("el-input",{model:{value:e.addForm.password,callback:function(t){e.$set(e.addForm,"password",t)},expression:"addForm.password"}})],1),t("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[t("el-input",{model:{value:e.addForm.email,callback:function(t){e.$set(e.addForm,"email",t)},expression:"addForm.email"}})],1),t("el-form-item",{attrs:{label:"手机",prop:"mobile"}},[t("el-input",{model:{value:e.addForm.mobile,callback:function(t){e.$set(e.addForm,"mobile",t)},expression:"addForm.mobile"}})],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.addDialogVisible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.addUser}},[e._v("确 定")])],1)],1),t("el-dialog",{attrs:{title:"修改用户",visible:e.editDialogVisible,width:"50%"},on:{close:e.editDialogClosed,"update:visible":function(t){e.editDialogVisible=t}}},[t("el-form",{ref:"editFromRef",attrs:{model:e.editForm,rules:e.editFormRules,"label-width":"70px"}},[t("el-form-item",{attrs:{label:"用户名",prop:"username"}},[t("el-input",{attrs:{disabled:""},model:{value:e.editForm.username,callback:function(t){e.$set(e.editForm,"username",t)},expression:"editForm.username"}})],1),t("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[t("el-input",{model:{value:e.editForm.email,callback:function(t){e.$set(e.editForm,"email",t)},expression:"editForm.email"}})],1),t("el-form-item",{attrs:{label:"手机",prop:"mobile"}},[t("el-input",{model:{value:e.editForm.mobile,callback:function(t){e.$set(e.editForm,"mobile",t)},expression:"editForm.mobile"}})],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.editDialogVisible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.editUserInfo}},[e._v("确 定")])],1)],1),t("el-dialog",{attrs:{title:"分配角色",visible:e.setRoleDialogVisible},on:{"update:visible":function(t){e.setRoleDialogVisible=t},close:e.setRoleDialogClosed}},[t("div",[t("p",[e._v("当前的用户："+e._s(e.userInfo.username))]),t("p",[e._v("当前的角色："+e._s(e.userInfo.role_name))]),t("p",[e._v("分配新角色： "),t("el-select",{attrs:{placeholder:"请选择"},model:{value:e.seletedRoleId,callback:function(t){e.seletedRoleId=t},expression:"seletedRoleId"}},e._l(e.rolesList,(function(e){return t("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1)]),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.setRoleDialogVisible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.saveRoleInfo}},[e._v("确 定")])],1)])],1)},l=[],i=a(555),r=(a(7467),{data(){var e=(e,t,a)=>{const s=/^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+(\.[a-zA-Z0-9_-])+/;if(s.test(t))return a();a(new Error("请输入合法的邮箱"))},t=(e,t,a)=>{const s=/^(0|86|17951)?(13[0-9]|15[012356789]|17[678]|18[0-9]|14[57])[0-9]{8}$/;if(s.test(t))return a();a(new Error("请输入合法的手机号"))};return{select:"",queryInfo:{query:"",pagenum:1,pagesize:2},userList:[],total:0,addDialogVisible:!1,addForm:{username:"test566",password:"12345678",email:"123456@qq.com",mobile:"18388888888"},addFormRules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,max:10,message:"用户名的长度在3-10个字符之间",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:15,message:"用户名的长度在6-15个字符之间",trigger:"blur"}],email:[{required:!0,message:"请输入邮箱",trigger:"blur"},{validator:e,trigger:"blur"}],mobile:[{required:!0,message:"请输入手机",trigger:"blur"},{validator:t,trigger:"blur"}]},editDialogVisible:!1,editForm:{},editFormRules:{email:[{required:!0,message:"请输入邮箱",trigger:"blur"},{validator:e,trigger:"blur"}],mobile:[{required:!0,message:"请输入手机",trigger:"blur"},{validator:t,trigger:"blur"}]},setRoleDialogVisible:!1,userInfo:{},rolesList:[],seletedRoleId:""}},created(){this.getUserList()},methods:{getUserList(e,t,a){const s=i.Lh["data"];if(e&&s[0]["users"].unshift(e),t){const e=s[0]["users"].findIndex((e=>e.id===t.id));s[0]["users"].splice(e,1,t)}a&&(s[0]["users"]=s[0]["users"].filter((e=>a!==e.id))),this.userList=s[0]["users"].filter((e=>e.username.includes(this.queryInfo.query))).slice(this.queryInfo.pagesize*(this.queryInfo.pagenum-1),this.queryInfo.pagesize*this.queryInfo.pagenum),this.total=this.queryInfo.query.length?this.userList.length:s[0]["users"].length,this.userList=JSON.parse(JSON.stringify(this.userList))},handleSizeChange(e){this.queryInfo.pagesize=e,this.getUserList()},handleCurrentChange(e){this.queryInfo.pagenum=e,this.getUserList()},userStateChanges(e){},addDialogClosed(){this.$refs.addFromRef.resetFields()},addUser(){this.$refs.addFromRef.validate((e=>{e&&(this.$message.success("添加用户成功"),this.addForm["id"]=allUserList[0]["users"].length,this.getUserList(this.addForm),setTimeout((()=>{this.addDialogVisible=!1}),100))}))},showEditDialog(e){e.id;this.editForm=e,this.editDialogVisible=!0},editDialogClosed(){this.$refs.editFromRef.resetFields()},editUserInfo(){this.$refs.editFromRef.validate((e=>{e&&(this.getUserList(null,this.editForm),setTimeout((()=>{this.editDialogVisible=!1}),100))}))},async removeUserById(e){const t=await this.$confirm("此操作将永久删除该用户?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch((e=>e));if("confirm"!==t)return this.$message.info("已取消删除");this.getUserList(null,null,e),this.$message.success("删除用户成功")},setRole(e){this.userInfo=e,this.rolesList=["主管","测试角色","测试角色2","test"],this.setRoleDialogVisible=!0},saveRoleInfo(){if(!this.seletedRoleId)return this.$message.error("请选择要分配的用户角色");this.getUserList(),this.setRoleDialogVisible=!1},setRoleDialogClosed(){this.seletedRoleId="",this.userInfo={}}}}),o=r,n=a(1001),d=(0,n.Z)(o,s,l,!1,null,"e51b8564",null),c=d.exports}}]);
//# sourceMappingURL=users_rights_roles.796ba6cd.js.map